basePath: /v1
definitions:
  data.Metadata:
    properties:
      current_page:
        example: 1
        type: integer
      first_page:
        example: 1
        type: integer
      last_page:
        example: 5
        type: integer
      page_page:
        example: 20
        type: integer
      total_records:
        example: 100
        type: integer
    type: object
  data.Movie:
    properties:
      genres:
        example:
        - Drama
        - Crime
        items:
          type: string
        type: array
      id:
        example: 1
        type: integer
      runtime:
        example: 142
        type: integer
      title:
        example: The Shawshank Redemption
        type: string
      version:
        example: 1
        type: integer
      year:
        example: 1994
        type: integer
    type: object
  data.User:
    properties:
      activated:
        example: false
        type: boolean
      created_at:
        example: "2025-01-01T00:00:00Z"
        type: string
      email:
        example: something@example.com
        type: string
      id:
        example: 1
        type: integer
      name:
        example: John Doe
        type: string
    type: object
  main.MoviesListResponse:
    properties:
      metadata:
        $ref: '#/definitions/data.Metadata'
      movies:
        items:
          $ref: '#/definitions/data.Movie'
        type: array
    type: object
  main.activateInput:
    properties:
      token:
        type: string
    type: object
  main.inputChangePassword:
    properties:
      email:
        example: something@example.com
        type: string
    type: object
  main.inputUpdatePassword:
    properties:
      code:
        example: "123454"
        type: string
      new_password:
        example: n3wP@ssw0rd!
        type: string
    type: object
  main.loginInput:
    properties:
      email:
        example: something@example.com
        type: string
      password:
        example: s1mplepA$$word
        type: string
    type: object
  main.movieInput:
    properties:
      genres:
        example:
        - Drama
        - Crime
        items:
          type: string
        type: array
      runtime:
        example: 142
        type: integer
      title:
        example: The Shawshank Redemption
        type: string
      year:
        example: 1994
        type: integer
    type: object
  main.predictionInput:
    properties:
      title:
        example: The Shawshank Redemption
        type: string
    type: object
  main.refreshInput:
    properties:
      refresh_token:
        type: string
    type: object
  main.registerInput:
    properties:
      email:
        example: something@example.com
        type: string
      name:
        example: John Doe
        type: string
      password:
        example: s1mplepA$$word
        type: string
    type: object
  main.tokenPair:
    properties:
      authentication_token:
        type: string
      refresh_token:
        type: string
    type: object
info:
  contact: {}
  description: REST API for recomending movies, managing users and authentication.
  title: Movie Recommendation System API
  version: 1.0.0
paths:
  /healthcheck:
    get:
      description: Returns service health and metadata
      produces:
      - application/json
      responses:
        "200":
          description: 'OK | Example {"status": "avaliable", "env": "production",
            "version": "1.0.0"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Health check
      tags:
      - health
  /movie:
    get:
      description: Retrieve a list of movies filtered by title and genres with pagination
        and sorting
      parameters:
      - description: Full-text search by title
        in: query
        name: title
        type: string
      - collectionFormat: csv
        description: Comma-separated list of genres
        in: query
        items:
          type: string
        name: genres
        type: array
      - default: 1
        description: Page number
        in: query
        name: page
        type: integer
      - default: 20
        description: Number of items per page
        in: query
        name: page_size
        type: integer
      - default: id
        description: 'Sort by: one of id,title,year,runtime,-id,-title,-year,-runtime'
        in: query
        name: sort
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.MoviesListResponse'
        "401":
          description: 'Unauthorized | Example {"error": "this resourse avaliable
            only for authenticated users"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: List movies
      tags:
      - movies
    post:
      consumes:
      - application/json
      description: Create a new movie (admin only)
      parameters:
      - description: Movie payload
        in: body
        name: movie
        required: true
        schema:
          $ref: '#/definitions/main.movieInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/data.Movie'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: 'Forbidden | Example {"error": "your account must be activated
            to access this resourse"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Create a movie
      tags:
      - movies
  /movie/{movieID}:
    delete:
      description: Delete movie by ID (admin only)
      parameters:
      - description: Movie ID
        in: path
        name: movieID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 'OK | Example {"message": "movie successfully deleted"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Delete a movie
      tags:
      - movies
    get:
      description: Returns a single movie by numeric ID
      parameters:
      - description: Movie ID
        in: path
        name: movieID
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/data.Movie'
        "401":
          description: 'Unauthorized | Example {"error": "this resourse avaliable
            only for authenticated users"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 'Not Found | Example {"error": "requested resource could not
            be found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get a movie by ID
      tags:
      - movies
    patch:
      consumes:
      - application/json
      description: Patch movie by ID
      parameters:
      - description: Movie ID
        in: path
        name: movieID
        required: true
        type: integer
      - description: Partial movie payload
        in: body
        name: movie
        required: true
        schema:
          $ref: '#/definitions/main.movieInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/data.Movie'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: 'Not Found | Example {"error": "requested resource could not
            be found"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 'Conflict | Example {"error": "unable to update the record
            due to an edit conflict, please try again"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Update a movie
      tags:
      - movies
  /movie/predict:
    post:
      consumes:
      - application/json
      description: Validates movie input and predict movie
      parameters:
      - description: Moive payload
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/main.predictionInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.predictionInput'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 'Unauthorized | Example {"error": "this resourse avaliable
            only for authenticated users"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Get predict movie
      tags:
      - movies
  /tokens/activation:
    post:
      consumes:
      - application/json
      description: Validates email and checks if user exists, if not activated we
        send mail with activation code
      parameters:
      - description: Create activation token payload
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/main.inputChangePassword'
      produces:
      - application/json
      responses:
        "202":
          description: 'Accepted | Exmaple {"message": "check your email for activation
            code"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create new activation token
      tags:
      - tokens
  /tokens/authentication:
    post:
      consumes:
      - application/json
      description: Creates authentication and refresh tokens
      parameters:
      - description: Login payload
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/main.loginInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/main.tokenPair'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: 'Unauthorized | Example {"error": "invalid authentication credentials"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Log in and get tokens
      tags:
      - auth
  /tokens/password-reset:
    post:
      consumes:
      - application/json
      description: Validates email and checks if user exists and activated than sends
        email with code
      parameters:
      - description: Change password payload
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/main.inputChangePassword'
      produces:
      - application/json
      responses:
        "202":
          description: 'Accepted | Exmaple {"message": "check your email for reset
            code"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Post create password reset
      tags:
      - auth
  /tokens/refresh:
    put:
      consumes:
      - application/json
      description: Exchange refresh token for new auth and refresh tokens
      parameters:
      - description: Refresh token payload
        in: body
        name: token
        required: true
        schema:
          $ref: '#/definitions/main.refreshInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/main.tokenPair'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Refresh tokens
      tags:
      - auth
  /users:
    post:
      consumes:
      - application/json
      description: Creates a user account and sends activation email
      parameters:
      - description: Registration payload
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/main.registerInput'
      produces:
      - application/json
      responses:
        "202":
          description: Accepted
          schema:
            $ref: '#/definitions/data.User'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Register a new user
      tags:
      - users
  /users/activate:
    put:
      consumes:
      - application/json
      description: Activates a user account using activation token
      parameters:
      - description: Activation payload
        in: body
        name: activation
        required: true
        schema:
          $ref: '#/definitions/main.activateInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/main.activateInput'
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 'Conflict | Example {"error": "unable to update the record
            due to an edit conflict, please try again"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Activate user
      tags:
      - users
  /users/password:
    put:
      consumes:
      - application/json
      description: Validates new password and code, sets new password for user
      parameters:
      - description: Update password payload
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/main.inputUpdatePassword'
      produces:
      - application/json
      responses:
        "200":
          description: 'OK | Exmaple {"message": "your password was successfully reset"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: 'Bad Request | Example {"error": "body contains badly-formated
            JSON"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: 'Conflict | Example {"error": "unable to update the record
            due to an edit conflict, please try again"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "422":
          description: 'Unprocessable Entity | Example {"error": "validation error"}'
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: 'Internal Server Error | Example {"error": "server encountered
            a problem and could not process your request"}'
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Put update user password
      tags:
      - users
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: 'Provide a Bearer token: "Bearer {token}"'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
